<!DOCTYPE html>

{% from glob import glob %}
{% from urllib.parse import urlencode %}

<html>

<head>

        <meta charset="utf-8"/>
        <meta name="description" content=""/>
        <meta name="keywords" content=""/>
        <meta name="author" content=""/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="/pages/css/normalize.css" type="text/css" media="all">
        <link rel="stylesheet" href="/pages/css/layout.css" type="text/css" media="all">
        <link rel="stylesheet" href="/pages/css/prettify.css">


        <script src="/pages/js/jquery-3.1.0.min.js"></script>
            <!--[if lt IE 9]>
                <script src="/pages/js/html5shiv-printshiv.min.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
            <![endif]-->
        <script src="/pages/js/common.js"></script>
        <script src="/pages/js/split.js"></script>
        <script src="/pages/js/prettify.js"></script>
       		<script>
       		window.onload = (function(){ prettyPrint(); });
       		</script>

</head>

<div class="main m-cfix">

  <div class="m-w1400">

    <!-- main content -->
    <div class="main-content row m-cfix">

      <div class="col-one-third split split-horizontal"  id="two">

        <!-- training section 1 -->
        <section class="training-section m-upper" >

          <!-- section headline -->
          <div class="headline">
            <h5><a class="tab" href="javascript:;">Description</a><a class="tab" href="javascript:;">Queries</a></h5>
          </div>
          <!-- section headline end -->

          <!-- inner content -->
          <div class="inner-content">

            <!-- tab 1 -->
            {% set scenario_title = open("scenarios/"+name+"/title.txt",encoding='utf-8').readlines()[0] %}
            {% set desc = open("scenarios/"+name+"/description.txt",encoding='utf-8').readlines() %}
            <div class="info tab-body">
              <h5>{{scenario_title}}</h5>
              <b>Description:</b>
              <pre>
              {% for l in desc %}
                {{l.rstrip()}}
              {% end %}
              </pre>
            </div>

           <!-- tab 2 -->
           <div class="info tab-body">
             <h5>{{scenario_title}}</h5>
             <b>Queries:</b>
             <p>
             {% for (i,sc) in enumerate(sorted(glob("scenarios/"+name+"/queries/*.pql"))) %}
               {% set q_name = sc.split("/")[3] %}
               {% set base_name = q_name.split(".")[0] %}
               {% set descr = open("scenarios/"+name+"/queries/"+base_name+".txt",encoding='utf-8').readlines() %}
               <a href="/view_query?{{urlencode({'q':sc})}}" target="_parent"><h5>{{q_name}}:  <i>{{descr[0].rstrip()}}</i></h5></a>
               <p>
             {% end %}
           </div>
         </div>
       </section>
     </div>
   </div>
  </div>
</div>


</html>
